sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox","sap/ui/layout/ResponsiveFlowLayoutData","sap/m/Input","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,n,i,l,a,r){"use strict";var s;var c={};var d;return e.extend("project1.controller.View1",{onInit:async function(e){var t=this,o;await $.get({url:t.getOwnerComponent().getModel().getServiceUrl()+"/Quiz",success:function(e){var o=new sap.ui.model.json.JSONModel({});o.setProperty("/Exam",e.value);o.setProperty("/Quiz",e.value);t.getOwnerComponent().setModel(o,"localModel")},error:function(e){console.log(e)}})},onQuizTableSelectionChange:function(e){var t,o;t=e.getParameter("listItem");console.log(t);o=t.getBindingContext("localModel");var n=this.getOwnerComponent().getRouter();n.navTo("RouteMainView",{index:o.getPath().split("/")[2]});if(o.getPath()){var i=this.getOwnerComponent().getModel("localModel").getProperty(o.getPath());var l=new sap.ui.model.json.JSONModel(i);this.getOwnerComponent().setModel(l,"quizDetail")}else{var l=new sap.ui.model.json.JSONModel({});this.getOwnerComponent().setModel(l,"quizDetail")}this.byId("idQuizTable").removeSelections()},onPressAddExam:function(){var e=new sap.ui.model.json.JSONModel({});this.getOwnerComponent().setModel(e,"quizDetail");var t=this.getOwnerComponent().getRouter();t.navTo("RouteMainView",{})},onPressDeleteItem:function(e){var t=e.getSource().getBindingContext("localModel").getPath();var o=this.getView().getModel("localModel").getProperty(t).ID;var i=this.getView().getModel().getServiceUrl();var l=this;n.show("Do you want to delete this Exam",{icon:n.Icon.action,title:"title",actions:[n.Action.YES,n.Action.NO],emphasizedAction:n.Action.YES,onClose:function(e){if(e==="YES"){$.ajax({url:i+"Quiz"+`(ID=${o})`,method:"DELETE",contentType:"application/json",success:function(){alert("success");var e=l.getView().getModel("localModel").getProperty("/Exam");e=e.filter(e=>e.ID!=o);l.getView().getModel("localModel").setProperty("/Exam",e);l.getView().getModel("localModel").setProperty("/Quiz",e)},error:function(e){console.log(e)}})}}})},onMultiComboBoxSelectionChange:function(e){},onSearch:function(e){var t=this.byId("idSerachExamItem").getControl().getValue();var o=this.byId("idPrepStatusComboBox").getControl();var n=o.getSelectedKeys();var i=this.getOwnerComponent().getModel("localModel").getProperty("/Exam");i=i.filter(e=>n.includes(e.draft.toString(),0)&&e.title.includes(t));this.getOwnerComponent().getModel("localModel").setProperty("/Quiz",i);this.byId("idQuizTable").setShowOverlay(false)},onFilterChange:function(e){}})});